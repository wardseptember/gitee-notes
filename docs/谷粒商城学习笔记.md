# TODO

stream流学习

旧：192.168.43.187

更换数据库

192.168.200.153   --- > 192.168.31.171

# 启动

启动nacos-1,启动gateway

启动renren-fast-vue

启动renrenApplication



进度：55

# mysql

安装

```shell
docker run -p 3306:3306 --name JY_mysql -e MYSQL_ROOT_PASSWORD=123456 -d mysql
 docker exec -it cf0e056371f9 /bin/bash  进入mysql交互
```

# redis

安装

```
docker run -p 6379:6379 --name redis -v /mydata/redis/data:/data -v /mydata/redis/conf/redis.conf:/etc/redis/redis.conf --privileged=true -d d4f259423416 redis-server /etc/redis/redis.conf

docker run -p 6379:6379 -d d4f259423416 redis-server

docker exec -it 22873cd482a3 redis-cli
sudo docker update redis --restart=always
```

# nacos

```shell
sh startup.sh -m standalone     # 启动nacos, 单机版

http://127.0.0.1:8848/nacos/
```

# Picgo

```shell
picgo upload  # 上传剪切板内容，上传后自动复制到剪切板
```

# vue

```shell
问题：Node Sass does not yet support your current environment: OS X 64-bit with Unsupported runtime
参考：https://blog.csdn.net/yaya07755/article/details/96834875
解决：
1.先卸载
npm uninstall --save node-sass

2.清除缓存
npm cache clean -f

3.升级node-sass模块
npm install --save node-sass


快捷键
httppost
httpget
```

# mybatis

## 逻辑删除

* 配置全局的逻辑删除规则
* 配置逻辑删除的组件Bean，高版本可省略
* 给Bean加上逻辑删除注解@TableLogic

# 数据校验

Jsr303



分组校验

```

@Validated({UpdateGroup.class})
```



# 一些报错

p100集规格报错

```sql
INSERT INTO sys_menu (menu_id, parent_id, name, url, perms, type, icon, order_num) VALUES (76, 37, '规格维护', 'product/attrupdate', '', 2, 'log', 0);
```

# ES

9200 9300

kibana是ES的可视化界面

http://192.168.31.171:5601/app/kibana#?_g=()



https://easydoc.xyz/s/78237135/ZUqEdvA4/Tpz10eVn





https://github.com/cosmoswong/gulimall

# 本机ip

 192.168.31.219

# 优化

## 动静分离

动态请求经过网关，静态不经过，直接放在nginx里面。

## redis

### 读模式

* 缓存穿透：查询一个null数据，解决：缓存空数据
* 缓存击穿：大量并发进来同时查询一个正好过期的数据，解决：加锁，分布式锁
* 缓存雪崩：大量的key同时过期，解决：加随机时间

### 写模式

* 读写加锁
* 引入canal，感知到mysql的更新去更新数据库
* 读多写多，直接去查数据库

总结：

常规数据(读多写少，即时性，一致性要求不高的数据)，完全可以使用spring-cache.





属性：

* CPU品牌
* CPU型号



创建线程的方式：

* 继承Thread
* 实现Runable接口
* 实现Callable接口+FutureTask
* 线程池



# 分布式Session

session存到redis中，整合springsession





## ES

迁移数据

```
POST _reindex
{
  "source": {
    "index": "product"
  },
  "dest": {
    "index": "gulimall_product"
  }
}
```

# 购物车

* 离线购物车
* 在线购物车

使用ThreadLocal共享数据，同一个用户请求，都用的同一个线程。